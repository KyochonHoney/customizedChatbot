nohup: ignoring input

Collecting usage statistics. To deactivate, set browser.gatherUsageStats to false.


  You can now view your Streamlit app in your browser.

  URL: http://0.0.0.0:8503

Error in RootListenersTracer.on_chain_end callback: KeyError('answer')
RAG collection count: 374
RAG collection count: 374
RAG collection count: 374
RAG collection count: 374
RAG collection count: 374
RAG collection count: 374
RAG collection count: 748
RAG collection count: 748
RAG collection count: 748
RAG collection count: 748
RAG collection count: 748
RAG collection count: 748
RAG collection count: 748
RAG collection count: 748
RAG collection count: 748
RAG collection count: 748
RAG collection count: 748
RAG collection count: 748
RAG collection count: 748
RAG collection count: 748
RAG collection count: 748
RAG collection count: 748
RAG collection count: 748
RAG collection count: 748
RAG collection count: 748
RAG collection count: 748
RAG collection count: 748
RAG collection count: 748
RAG collection count: 748
RAG collection count: 748
RAG collection count: 748
RAG collection count: 748
RAG collection count: 748
RAG collection count: 748
RAG collection count: 748
RAG collection count: 748
RAG collection count: 20
RAG collection count: 20
RAG collection count: 20
RAG collection count: 20
RAG collection count: 20
RAG collection count: 20
RAG collection count: 20
RAG collection count: 20
RAG collection count: 20
RAG collection count: 20
RAG collection count: 20
RAG collection count: 20
RAG collection count: 20
RAG collection count: 20
RAG collection count: 20
RAG collection count: 20
RAG collection count: 20
RAG collection count: 20
RAG collection count: 430
RAG collection count: 432
RAG collection count: 432
[31mâ”€â”€[0m[31mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m[31m [0m[1;31mTraceback [0m[1;2;31m(most recent call last)[0m[31m [0m[31mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m[31mâ”€â”€[0m
[31m [0m [2m/home/chatbot/venv/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/[0m[1mexec_[0m [31m [0m
[31m [0m [1mcode.py[0m:128 in exec_func_with_error_handling                                         [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2m/home/chatbot/venv/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/[0m[1mscrip[0m [31m [0m
[31m [0m [1mt_runner.py[0m:669 in code_to_exec                                                      [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2m/home/chatbot/[0m[1mchat.py[0m:3 in <module>                                                  [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m   [2m 1 [0m[94mimport[0m[90m [0m[4;96mos[0m                                                                       [31m [0m
[31m [0m   [2m 2 [0m[94mimport[0m[90m [0m[4;96mstreamlit[0m[90m [0m[94mas[0m[90m [0m[4;96mst[0m                                                          [31m [0m
[31m [0m [31mâ± [0m 3 [1;4;94mfrom[0m[1;4;90m [0m[1;4;96mllm_utils[0m[1;4;90m [0m[1;4;94mimport[0m[1;4m get_ai_response[0m                                           [31m [0m
[31m [0m   [2m 4 [0m                                                                                [31m [0m
[31m [0m   [2m 5 [0mst.set_page_config(page_title=[33m"[0m[33mRAG PART3[0m[33m"[0m, page_icon=[33m"[0m[33mğŸ¤–[0m[33m"[0m)                      [31m [0m
[31m [0m   [2m 6 [0m                                                                                [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2m/home/chatbot/[0m[1mllm_utils.py[0m:73 in <module>                                            [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m   [2m 70 [0m)                                                                              [31m [0m
[31m [0m   [2m 71 [0m                                                                               [31m [0m
[31m [0m   [2m 72 [0mqa_prompt = ChatPromptTemplate.from_messages([                                 [31m [0m
[31m [0m [31mâ± [0m 73 [2mâ”‚   [0m([33m"[0m[33msystem[0m[1;4;33m"[0m[1;4m, SYSTEM_PROMPT),[0m                                                 [31m [0m
[31m [0m   [2m 74 [0m[2mâ”‚   [0m[1;4mMessagesPlaceholder([0m[1;4;33m"[0m[1;4;33mchat_history[0m[1;4;33m"[0m[1;4m),[0m                                       [31m [0m
[31m [0m   [2m 75 [0m[2mâ”‚   [0m[1;4m([0m[1;4;33m"[0m[1;4;33mhuman[0m[1;4;33m"[0m[1;4m, [0m[1;4;33m"[0m[1;4;33m{input}[0m[1;4;33m"[0m[1;4m)[0m                                                       [31m [0m
[31m [0m   [2m 76 [0m[1;4m])[0m                                                                             [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2m/home/chatbot/venv/lib/python3.12/site-packages/langchain_core/prompts/[0m[1mchat.py[0m:1170  [31m [0m
[31m [0m in from_messages                                                                     [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m   [2m1167 [0m[2;33mâ”‚   â”‚   â”‚   [0m[33ma chat prompt template.[0m                                           [31m [0m
[31m [0m   [2m1168 [0m[2mâ”‚   â”‚   [0m                                                                      [31m [0m
[31m [0m   [2m1169 [0m[2;33mâ”‚   â”‚   [0m[33m"""[0m                                                                   [31m [0m
[31m [0m [31mâ± [0m1170 [2mâ”‚   â”‚   [0m[94mreturn[0m [1;4;96mcls[0m[1;4m(messages, template_format=template_format)[0m                 [31m [0m
[31m [0m   [2m1171 [0m[2mâ”‚   [0m                                                                          [31m [0m
[31m [0m   [2m1172 [0m[2mâ”‚   [0m[94mdef[0m[90m [0m[92mformat_messages[0m([96mself[0m, **kwargs: Any) -> [96mlist[0m[BaseMessage]:            [31m [0m
[31m [0m   [2m1173 [0m[2;90mâ”‚   â”‚   [0m[33m"""Format the chat template into a list of finalized messages.[0m        [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2m/home/chatbot/venv/lib/python3.12/site-packages/langchain_core/prompts/[0m[1mchat.py[0m:952   [31m [0m
[31m [0m in __init__                                                                          [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m   [2m 949 [0m[2mâ”‚   â”‚   [0m                                                                      [31m [0m
[31m [0m   [2m 950 [0m[2;33mâ”‚   â”‚   [0m[33m"""[0m                                                                   [31m [0m
[31m [0m   [2m 951 [0m[2mâ”‚   â”‚   [0mmessages_ = [1;4m[[0m                                                         [31m [0m
[31m [0m [31mâ± [0m 952 [2mâ”‚   â”‚   â”‚   [0m[1;4m_convert_to_message_template(message, template_format)[0m            [31m [0m
[31m [0m   [2m 953 [0m[2mâ”‚   â”‚   â”‚   [0m[1;4;94mfor[0m[1;4m message [0m[1;4;95min[0m[1;4m messages[0m                                           [31m [0m
[31m [0m   [2m 954 [0m[2mâ”‚   â”‚   [0m[1;4m][0m                                                                     [31m [0m
[31m [0m   [2m 955 [0m                                                                              [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2m/home/chatbot/venv/lib/python3.12/site-packages/langchain_core/prompts/[0m[1mchat.py[0m:1447  [31m [0m
[31m [0m in _convert_to_message_template                                                      [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m   [2m1444 [0m[2mâ”‚   â”‚   â”‚   [0m[94mraise[0m [96mValueError[0m(msg)                                             [31m [0m
[31m [0m   [2m1445 [0m[2mâ”‚   â”‚   [0mmessage_type_str, template = message                                  [31m [0m
[31m [0m   [2m1446 [0m[2mâ”‚   â”‚   [0m[94mif[0m [96misinstance[0m(message_type_str, [96mstr[0m):                                 [31m [0m
[31m [0m [31mâ± [0m1447 [2mâ”‚   â”‚   â”‚   [0mmessage_ = [1;4m_create_template_from_message_type([0m                    [31m [0m
[31m [0m   [2m1448 [0m[2mâ”‚   â”‚   â”‚   â”‚   [0m[1;4mmessage_type_str, template, template_format=template_format[0m   [31m [0m
[31m [0m   [2m1449 [0m[2mâ”‚   â”‚   â”‚   [0m[1;4m)[0m                                                                 [31m [0m
[31m [0m   [2m1450 [0m[2mâ”‚   â”‚   [0m[94melse[0m:                                                                 [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2m/home/chatbot/venv/lib/python3.12/site-packages/langchain_core/prompts/[0m[1mchat.py[0m:1354  [31m [0m
[31m [0m in _create_template_from_message_type                                                [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m   [2m1351 [0m[2mâ”‚   â”‚   â”‚   [0mcast([33m"[0m[33mstr[0m[33m"[0m, template), template_format=template_format            [31m [0m
[31m [0m   [2m1352 [0m[2mâ”‚   â”‚   [0m)                                                                     [31m [0m
[31m [0m   [2m1353 [0m[2mâ”‚   [0m[94melif[0m message_type == [33m"[0m[33msystem[0m[33m"[0m:                                            [31m [0m
[31m [0m [31mâ± [0m1354 [2mâ”‚   â”‚   [0mmessage = [1;4mSystemMessagePromptTemplate.from_template([0m                  [31m [0m
[31m [0m   [2m1355 [0m[2mâ”‚   â”‚   â”‚   [0m[1;4mcast([0m[1;4;33m"[0m[1;4;33mstr[0m[1;4;33m"[0m[1;4m, template), template_format=template_format[0m            [31m [0m
[31m [0m   [2m1356 [0m[2mâ”‚   â”‚   [0m[1;4m)[0m                                                                     [31m [0m
[31m [0m   [2m1357 [0m[2mâ”‚   [0m[94melif[0m message_type == [33m"[0m[33mplaceholder[0m[33m"[0m:                                       [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2m/home/chatbot/venv/lib/python3.12/site-packages/langchain_core/prompts/[0m[1mchat.py[0m:529   [31m [0m
[31m [0m in from_template                                                                     [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m   [2m 526 [0m[2mâ”‚   â”‚   â”‚   â”‚   â”‚   [0m[94mraise[0m [96mValueError[0m(msg)                                     [31m [0m
[31m [0m   [2m 527 [0m[2mâ”‚   â”‚   â”‚   [0m[94mreturn[0m [96mcls[0m(prompt=prompt, **kwargs)                               [31m [0m
[31m [0m   [2m 528 [0m[2mâ”‚   â”‚   [0mmsg = [33mf[0m[33m"[0m[33mInvalid template: [0m[33m{[0mtemplate[33m}[0m[33m"[0m                                 [31m [0m
[31m [0m [31mâ± [0m 529 [2mâ”‚   â”‚   [0m[1;4;94mraise[0m[1;4m [0m[1;4;96mValueError[0m[1;4m(msg)[0m                                                 [31m [0m
[31m [0m   [2m 530 [0m[2mâ”‚   [0m                                                                          [31m [0m
[31m [0m   [2m 531 [0m[2mâ”‚   [0m[1;95m@classmethod[0m                                                              [31m [0m
[31m [0m   [2m 532 [0m[2mâ”‚   [0m[94mdef[0m[90m [0m[92mfrom_template_file[0m(                                                   [31m [0m
[31mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m
[1;91mValueError: [0mInvalid template: [1m([0m[32m"ë‹¹ì‹ ì€ ë§ì¶¤ë°°ì›€ê¸¸ ì „ìš© AI ì±—ë´‡ì…ë‹ˆë‹¤. ë°˜ë“œì‹œ [0m
[32mDB[0m[32m([0m[32m{[0m[32mcontext[0m[32m}[0m[32m)[0m[32mì— ìˆëŠ” ë‚´ìš©ìœ¼ë¡œë§Œ ê°„ë‹¨íˆ ë‹µë³€í•˜ì„¸ìš”. DBì— í•´ë‹¹ ë‚´ìš©ì´ ì—†ìœ¼ë©´ 'ì£„ì†¡í•©ë‹ˆë‹¤. [0m
[32mì œê°€ ëª¨ë¥´ëŠ” ì§ˆë¬¸ì…ë‹ˆë‹¤ :[0m[32m)[0m[32m'ë¼ê³ ë§Œ ë‹µí•˜ì„¸ìš”. ë¶ˆí•„ìš”í•œ ì„¤ëª… ì—†ì´ ì§§ê³  ëª…í™•í•˜ê²Œ [0m
[32më‹µë³€í•˜ì„¸ìš”."[0m, [32m'ë‹µë³€ì€ 500ì ë‚´ë¡œë§Œ í•´ì£¼ì„¸ìš”'[0m[1m)[0m
[31mâ”€â”€[0m[31mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m[31m [0m[1;31mTraceback [0m[1;2;31m(most recent call last)[0m[31m [0m[31mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m[31mâ”€â”€[0m
[31m [0m [2m/home/chatbot/venv/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/[0m[1mexec_[0m [31m [0m
[31m [0m [1mcode.py[0m:128 in exec_func_with_error_handling                                         [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2m/home/chatbot/venv/lib/python3.12/site-packages/streamlit/runtime/scriptrunner/[0m[1mscrip[0m [31m [0m
[31m [0m [1mt_runner.py[0m:669 in code_to_exec                                                      [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2m/home/chatbot/[0m[1mchat.py[0m:3 in <module>                                                  [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m   [2m 1 [0m[94mimport[0m[90m [0m[4;96mos[0m                                                                       [31m [0m
[31m [0m   [2m 2 [0m[94mimport[0m[90m [0m[4;96mstreamlit[0m[90m [0m[94mas[0m[90m [0m[4;96mst[0m                                                          [31m [0m
[31m [0m [31mâ± [0m 3 [1;4;94mfrom[0m[1;4;90m [0m[1;4;96mllm_utils[0m[1;4;90m [0m[1;4;94mimport[0m[1;4m get_ai_response[0m                                           [31m [0m
[31m [0m   [2m 4 [0m                                                                                [31m [0m
[31m [0m   [2m 5 [0mst.set_page_config(page_title=[33m"[0m[33mRAG PART3[0m[33m"[0m, page_icon=[33m"[0m[33mğŸ¤–[0m[33m"[0m)                      [31m [0m
[31m [0m   [2m 6 [0m                                                                                [31m [0m
[31mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[0m
[1;91mImportError: [0mcannot import name [32m'get_ai_response'[0m from [32m'llm_utils'[0m 
[1m([0m[35m/home/chatbot/[0m[95mllm_utils.py[0m[1m)[0m
/home/chatbot/llm_utils.py:113: LangChainDeprecationWarning: The method `BaseRetriever.get_relevant_documents` was deprecated in langchain-core 0.1.46 and will be removed in 1.0. Use :meth:`~invoke` instead.
  elif isinstance(chunk, str):
